(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{4837:function(e,t,a){Promise.resolve().then(a.bind(a,9399))},9399:function(e,t,a){"use strict";a.r(t);var n=a(7437),s=a(2265),c=a(1268),i=a(5217),o=a(3335),r=a(7648);t.default=()=>{let[e,t]=(0,s.useState)(!1),[a,d]=(0,s.useState)(!1),[l,m]=(0,s.useState)(null),[h,u]=(0,s.useState)(null),f=async()=>{try{t(!0);let e=await fetch("/api/categories",{method:"GET",cache:"no-store"});if(!e.ok)throw u(null),Error("".concat(e.status,": ").concat(e.statusText));let a=await e.json();u(a.map(e=>({id:e.id,name:e.name})))}catch(t){let e=t instanceof Error?"カテゴリの一覧のフェッチに失敗しました: ".concat(t.message):"予期せぬエラーが発生しました ".concat(t);console.error(e),m(e)}finally{t(!1)}};if((0,s.useEffect)(()=>{f()},[]),e)return(0,n.jsxs)("div",{className:"text-gray-500",children:[(0,n.jsx)(c.G,{icon:i.LM3,className:"mr-1 animate-spin"}),"Loading..."]});let x=async e=>{if(window.confirm("カテゴリ「".concat(e.name,"」を本当に削除しますか？"))){d(!0);try{let t="/api/admin/categories/".concat(e.id),a=await fetch(t,{method:"DELETE",cache:"no-store"});if(!a.ok)throw Error("".concat(a.status,": ").concat(a.statusText));await f()}catch(t){let e=t instanceof Error?"カテゴリのDELETEリクエストに失敗しました\n".concat(t.message):"予期せぬエラーが発生しました\n".concat(t);console.error(e),window.alert(e),d(!1)}}};return h?(0,n.jsxs)("main",{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:"カテゴリの管理"}),(0,n.jsx)("div",{className:"mb-3 flex items-end justify-end",children:(0,n.jsx)(r.default,{href:"/admin/categories/new",children:(0,n.jsx)("button",{type:"submit",className:(0,o.m6)("rounded-md px-5 py-1 font-bold","bg-blue-500 text-white hover:bg-blue-600","disabled:cursor-not-allowed disabled:opacity-50"),children:"カテゴリの新規作成"})})}),0===h.length?(0,n.jsx)("div",{className:"text-gray-500",children:"（カテゴリは1個も作成されていません）"}):(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,n.jsxs)("div",{className:(0,o.m6)("border border-slate-400 p-3","flex items-center justify-between","font-bold"),children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.default,{href:"/admin/categories/".concat(e.id),children:e.name})}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(r.default,{href:"/admin/categories/".concat(e.id),children:(0,n.jsx)("button",{type:"button",className:(0,o.m6)("rounded-md px-5 py-1 font-bold","bg-indigo-500 text-white hover:bg-indigo-600"),children:"編集"})}),(0,n.jsx)("button",{type:"button",className:(0,o.m6)("rounded-md px-5 py-1 font-bold","bg-red-500 text-white hover:bg-red-600"),onClick:()=>{x(e)},children:"削除"})]})]},e.id))})})]}):(0,n.jsx)("div",{className:"text-red-500",children:l})}}},function(e){e.O(0,[676,268,335,648,971,117,744],function(){return e(e.s=4837)}),_N_E=e.O()}]);